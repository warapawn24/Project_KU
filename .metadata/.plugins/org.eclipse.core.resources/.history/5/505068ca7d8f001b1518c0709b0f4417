package com.ku.dku.controller;

import java.util.Date;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.bind.annotation.RestController;

import com.ku.dku.bean.CheckPostRequest;
import com.ku.dku.bean.CheckPostResponse;
import com.ku.dku.constant.LookupConstant;
import com.ku.dku.entity.TxPost;
import com.ku.dku.service.PostService;

@RestController
@RequestMapping(value = "/user/post")
public class PostController {

	@Autowired private PostService postService;
	
	@RequestMapping(value = "/checkPost",method = RequestMethod.POST)
	public @ResponseBody CheckPostResponse checkPost(@RequestBody CheckPostRequest request) {
	
		CheckPostResponse response = new CheckPostResponse();
		
		IterableTxPost<TxPost> txPost = postService.checkPost(request.getStudentId());
		
		List<E>
		
		if (txPost.getPostStatus().equals(LookupConstant.POST_STATUS_RECEIVED)) {
			
			response.setPostCode(txPost.getPostCode());
			response.setPostId(txPost.getRecId());
			response.setPostDate(txPost.getPostDate());
			response.setPostRecivedate(txPost.getPostRecivedate());
			response.setPostStatus(txPost.getPostStatus());
		}else {
			response.setPostCode(txPost.getPostCode());
			response.setPostId(txPost.getRecId());
			response.setPostDate(txPost.getPostDate());
			response.setPostRecivedate(null);
			response.setPostStatus(txPost.getPostStatus());
		}
		
		return response;
		
	}
}

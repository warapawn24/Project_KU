package com.ku.dku.service;

import java.util.Date;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.ku.dku.entity.LkTerm;
import com.ku.dku.entity.TxBail;
import com.ku.dku.repository.LkTermRepository;
import com.ku.dku.repository.TxBailRepository;

@Service
public class BailService {

	@Autowired private TxBailRepository txBailRepository;
	@Autowired private LkTermRepository lkTermRepository;
	
	public Iterable<LkTerm> getListTerm(){
		
		Iterable<LkTerm> listTerm = lkTermRepository.findAll();
		
		return listTerm;
		
	}
	
	boolean createBail(long termId,int year) {
		
		long millies = System.currentTimeMillis();
		Date date = new Date(millies);
		
		LkTerm term = lkTermRepository.findByTermId(termId);
		//create
		TxBail bail = new TxBail();
		bail.setBailDate(date);
		bail.setTermName(term.getTermName());
		bail.setYear(year);
	
		return true;
		
	}
}

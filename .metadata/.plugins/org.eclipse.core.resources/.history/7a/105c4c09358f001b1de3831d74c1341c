package com.ku.dku.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.bind.annotation.RestController;

import com.ku.dku.bean.CheckPostRequest;
import com.ku.dku.bean.CheckPostResponse;
import com.ku.dku.entity.TxPost;
import com.ku.dku.service.PostService;

@RestController
@RequestMapping(value = "/user/post")
public class PostController {

	@Autowired private PostService postService;
	
	@RequestMapping(value = "/checkPost",method = RequestMethod.POST)
	public @ResponseBody CheckPostResponse checkPost(@RequestBody CheckPostRequest request) {
	
		CheckPostResponse response = new CheckPostResponse();
		
		TxPost txPost = postService.checkPost(request.getStudentId());
		
		response.setPostCode(txPost.getPostCode());
		response.setPostId(txPost.getRecId());
		response.setPostDate(txPost.getPostDate());
		response.setPostRecivedate(txPost.getPostRecivedate());
		response.setPostStatus(txPost.getPostStatus());
		
		return response;
		
	}
}
